<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For My Favorite Person | 2025</title>
    
    <!-- External Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Inter:wght@300;400;500&family=Caveat:wght@600&display=swap" rel="stylesheet">

    <style>
        :root {
            --aurora-1: hsla(340, 70%, 55%, 0.4);
            --aurora-2: hsla(0, 75%, 55%, 0.3);
            --aurora-3: hsla(282, 82%, 54%, 0.3);
            --aurora-4: hsla(35, 90%, 60%, 0.3);
        }

        body { margin: 0; background-color: #0c0a09; color: white; font-family: 'Inter', sans-serif; overflow: hidden; height: 100vh; }
        h1, h2 { font-family: 'Playfair Display', serif; }

        /* Animated Aurora Background */
        .aurora-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -2;
            background: radial-gradient(circle at 20% 30%, var(--aurora-1) 0%, transparent 50%),
                        radial-gradient(circle at 80% 70%, var(--aurora-2) 0%, transparent 50%),
                        radial-gradient(circle at 50% 50%, var(--aurora-3) 0%, transparent 50%),
                        radial-gradient(circle at 10% 80%, var(--aurora-4) 0%, transparent 50%);
            filter: blur(80px); animation: aurora-move 20s ease-in-out infinite alternate; background-size: 200% 200%;
        }
        @keyframes aurora-move { 0% { background-position: 0% 0%; } 100% { background-position: 100% 100%; } }

        #three-canvas { position: fixed; top: 0; left: 0; z-index: -1; pointer-events: none; }

        /* Glassmorphism Classes */
        .glass-card {
            background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1); box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }

        .text-gradient { background: linear-gradient(to right, #f472b6, #ffffff); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .step-container { display: none; opacity: 0; transform: translateY(20px); width: 100%; }
        .step-active { display: flex; flex-direction: column; align-items: center; }

        .btn-romantic {
            background: linear-gradient(135deg, #ec4899 0%, #ef4444 100%);
            transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(236, 72, 153, 0.3);
            cursor: pointer;
        }
        .btn-romantic:hover { transform: translateY(-3px) scale(1.05); box-shadow: 0 6px 20px rgba(236, 72, 153, 0.5); }

        .progress-container { position: fixed; top: 2rem; left: 50%; transform: translateX(-50%); width: 200px; height: 4px; background: rgba(255, 255, 255, 0.1); border-radius: 10px; overflow: hidden; z-index: 100; }
        #progress-fill { height: 100%; width: 12.5%; background: linear-gradient(to right, #ec4899, #ef4444); transition: width 0.6s cubic-bezier(0.34, 1.56, 0.64, 1); }

        /* Shared Stack Styles for Photos and Videos */
        .media-stack { position: relative; width: 280px; height: 380px; perspective: 1000px; }
        .media-item {
            position: absolute; width: 100%; height: 100%; background: white; padding: 10px 10px 45px 10px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.5); transition: transform 0.6s ease;
            cursor: pointer; border-radius: 4px; overflow: hidden;
        }
        .media-item img, .media-item video { width: 100%; height: 300px; object-fit: cover; border-radius: 2px; pointer-events: none; }
        .media-caption { color: #333; font-family: 'Caveat', cursive; margin-top: 8px; font-size: 1.4rem; text-align: center; }
    </style>
</head>
<body>

    <div class="aurora-bg"></div>
    <canvas id="three-canvas"></canvas>

    <div class="progress-container glass-card">
        <div id="progress-fill"></div>
    </div>

    <main class="relative z-10 flex items-center justify-center min-h-screen p-6">
        
        <!-- Step 1: Welcome -->
        <div id="step1" class="step-container step-active max-w-lg text-center">
            <div class="mb-6 text-6xl animate-bounce">‚ù§Ô∏è</div>
            <h1 class="text-5xl md:text-6xl font-bold mb-4 text-gradient">Hey Love,</h1>
            <p class="text-lg text-gray-300 mb-8 leading-relaxed">I created this little space just for you‚Ä¶ because you make my world brighter every single day.</p>
            <button onclick="nextStep(2)" class="btn-romantic px-8 py-4 rounded-full font-semibold text-white uppercase tracking-widest">Start Our Story</button>
        </div>

        <!-- Step 2: Valentine Wish -->
        <div id="step2" class="step-container max-w-lg text-center">
            <div class="mb-6 text-6xl">üåπ</div>
            <h2 class="text-4xl md:text-5xl font-bold mb-4 text-gradient">Happy Valentine‚Äôs Day!</h2>
            <p class="text-lg text-gray-300 mb-8">You‚Äôre not just special to me ‚Äî you‚Äôre the reason ordinary days feel magical.</p>
            <button onclick="nextStep(3)" class="btn-romantic px-8 py-4 rounded-full font-semibold text-white uppercase tracking-widest">There‚Äôs More‚Ä¶</button>
        </div>

        <!-- Step 3: Bento Grid -->
        <div id="step3" class="step-container w-full max-w-4xl">
            <h2 class="text-3xl md:text-4xl font-bold mb-8 text-center text-gradient">Why You Mean So Much</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
                <div class="glass-card p-6 rounded-3xl md:col-span-2"><h3 class="text-xl font-bold mb-2 text-pink-400">‚ú® Your Heart and Possessive Brain</h3><p class="text-gray-400">Namakku kurukka evalaiyum vidaadha unoda aatakara moolai, enaku oru vagaila pudichiruku</p></div>
                <div class="glass-card p-6 rounded-3xl"><h3 class="text-xl font-bold mb-2 text-pink-400">üòä Your Smile</h3><p class="text-gray-400">Andha chatti moonjila vara gala gala siruppu irukaee aiyoooo azhagu</p></div>
                <div class="glass-card p-6 rounded-3xl md:col-span-3"><h3 class="text-xl font-bold mb-2 text-pink-400">üåü Your Presence</h3><p class="text-gray-400">Life feels lighter, happier, and more beautiful with you by my side babyyy</p></div>
            </div>
            <div class="flex justify-center"><button onclick="nextStep(4)" class="btn-romantic px-8 py-4 rounded-full font-semibold text-white">Next Chapter</button></div>
        </div>

        <!-- Step 4: The Future -->
        <div id="step4" class="step-container max-w-lg text-center">
            <div class="mb-6 text-6xl">üöÄ</div>
            <h2 class="text-4xl font-bold mb-4 text-gradient">Our Future</h2>
            <p class="text-lg text-gray-300 mb-8">I look forward to every sunrise and sunset with you. I can't wait for all our future adventures and many more valentines day together.</p>
            <button onclick="nextStep(5)" class="btn-romantic px-8 py-4 rounded-full font-semibold text-white">A Promise...</button>
        </div>

        <!-- Step 5: The Promise -->
        <div id="step5" class="step-container max-w-lg text-center">
            <div class="mb-6 text-6xl">ü§ù</div>
            <h2 class="text-4xl font-bold mb-4 text-gradient">My Promise</h2>
            <p class="text-lg text-gray-300 mb-8 italic">"I promise to hold your hand through the storms and laugh with you in the sunshine. I promise to be your side always and lead to a happy future."</p>
            <button onclick="nextStep(6)" class="btn-romantic px-8 py-4 rounded-full font-semibold text-white">Our Memories</button>
        </div>

        <!-- Step 6: ENHANCED PHOTO STACK -->
        <div id="step6" class="step-container max-w-lg text-center">
            <h2 class="text-4xl font-bold mb-4 text-gradient">Unnudan Azhagiya Ninaivugal</h2>
            <p class="text-gray-400 mb-8 italic">Click to flip through our photos</p>
            
            <div class="media-stack mb-12" id="photoStack">
                <!-- Photo 3 -->
                <div class="media-item" onclick="shuffleMedia(this, 'photoStack')">
                    <img src="https://res.cloudinary.com/dlz3jtnto/image/upload/q_auto,f_auto/v1770361794/61361843-2918-4c3b-8c1f-f4518003b060_b6nmsh.jpg" alt="Memory 3">
                    <p class="media-caption">First Meet and First Movie togetherüåπüé¨</p>
                </div>
                <!-- Photo 2 -->
                <div class="media-item" onclick="shuffleMedia(this, 'photoStack')">
                    <img src="https://res.cloudinary.com/dlz3jtnto/image/upload/q_auto,f_auto/v1770361797/IMG_20191226_174346_gaxyax.jpg" alt="Memory 2">
                    <p class="media-caption">First Bike Ride, with the Riderrrr Mukilüòéüòå</p>
                </div>
                <!-- Photo 1 -->
                <div class="media-item" onclick="shuffleMedia(this, 'photoStack')">
                    <img src="https://res.cloudinary.com/dlz3jtnto/image/upload/q_auto,f_auto/v1770361797/20220731_122720_Original_gqt9xf.jpg" alt="Memory 1">
                    <p class="media-caption">First Boat Rideüö§üåä</p>
                </div>
            </div>

            <button onclick="nextStep(7)" class="btn-romantic px-8 py-4 rounded-full font-semibold text-white">See Our Videos</button>
        </div>

        <!-- STEP 7: VIDEO STACK -->
        <div id="step7" class="step-container max-w-lg text-center">
            <h2 class="text-3xl font-bold mb-4 text-gradient text-center">Our Clips</h2>
            <p class="text-gray-400 mb-8">Tap to shuffle through our memories!</p>
            
            <div class="media-stack mb-12" id="videoStack">
                <div class="media-item" onclick="shuffleMedia(this, 'videoStack')">
                    <video autoplay muted loop playsinline>
                        <source src="https://res.cloudinary.com/dlz3jtnto/video/upload/q_auto,f_auto/v1770358279/20220425-171614-554_brthda.mp4" type="video/mp4">
                    </video>
                    <p class="media-caption">Forever with you</p>
                </div>
                <div class="media-item" onclick="shuffleMedia(this, 'videoStack')">
                    <video autoplay muted loop playsinline>
                        <source src="https://res.cloudinary.com/dlz3jtnto/video/upload/q_auto,f_auto/v1770358338/IMG_5228_bwqfjx.mov" type="video/mp4">
                    </video>
                    <p class="media-caption">Timeless smile</p>
                </div>
            </div>

            <button onclick="nextStep(8)" class="btn-romantic px-8 py-4 rounded-full font-semibold text-white uppercase tracking-widest">One Last Thing</button>
        </div>

        <!-- Step 8: Finale -->
        <div id="step8" class="step-container max-w-lg text-center">
            <div class="mb-6 text-6xl">üíñ</div>
            <h2 class="text-4xl font-bold mb-4 text-gradient">My Wish For Us</h2>
            <p id="final-paragraph" class="text-lg text-gray-300 mb-8 leading-relaxed">Unnai arinthu 10 varudangal aagivittadhu; unnudan inaindhu 8 varudangal kadandhuvittadhu. Innum pala varudangal unnudan magizhchiyaga irukka virumbugiren ‚ù§Ô∏è </p>
            <div id="final-text" class="hidden text-3xl font-bold mb-8 text-white">Happy Valentine‚Äôs Day, Maa Lub ‚ù§Ô∏è</div>
            <button id="celebrate-btn" onclick="startCelebration()" class="btn-romantic px-10 py-4 rounded-full font-bold text-white uppercase tracking-widest">Celebrate Love</button>
        </div>

    </main>

    <script>
        // --- STACK LOGIC ---
        function initStack(stackId) {
            const stack = document.getElementById(stackId);
            const items = stack.querySelectorAll('.media-item');
            items.forEach((item, i) => {
                const rotation = (i - (items.length - 1) / 2) * 6;
                gsap.set(item, { rotation: rotation, x: i * 4, y: i * 4, zIndex: i });
            });
        }

        function shuffleMedia(el, stackId) {
            const stack = document.getElementById(stackId);
            gsap.to(el, {
                x: 350, rotation: 30, opacity: 0, scale: 0.8, duration: 0.6, ease: "power2.inOut",
                onComplete: () => {
                    stack.prepend(el);
                    gsap.set(el, { x: 0, rotation: 0, opacity: 1, scale: 1 });
                    initStack(stackId);
                }
            });
        }

        // --- NAVIGATION ---
        let currentStep = 1;
        function nextStep(step) {
            const currentEl = document.getElementById(`step${currentStep}`);
            const nextEl = document.getElementById(`step${step}`);
            gsap.to(currentEl, { opacity: 0, y: -20, duration: 0.5, onComplete: () => {
                currentEl.classList.remove('step-active');
                nextEl.classList.add('step-active');
                gsap.fromTo(nextEl, { opacity: 0, y: 20 }, { opacity: 1, y: 0, duration: 0.7 });
                currentStep = step;
                document.getElementById('progress-fill').style.width = `${(step/8) * 100}%`;
                if(step === 6) initStack('photoStack');
                if(step === 7) initStack('videoStack');
            }});
        }

        // --- THREE.JS BACKGROUND ---
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('three-canvas'), alpha: true, antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);

        const heartShape = new THREE.Shape();
        heartShape.moveTo(0,0); heartShape.bezierCurveTo(0,0,-5,-5,-10,0); heartShape.bezierCurveTo(-15,5,-10,15,0,20);
        heartShape.bezierCurveTo(10,15,15,5,10,0); heartShape.bezierCurveTo(5,-5,0,0,0,0);
        const geo = new THREE.ExtrudeGeometry(heartShape, { depth: 2, bevelEnabled: true });
        const hearts = [];
        for(let i=0; i<25; i++) {
            const m = new THREE.Mesh(geo, new THREE.MeshStandardMaterial({ color: 0xec4899, roughness: 0.3 }));
            m.position.set((Math.random()-0.5)*100, (Math.random()-0.5)*100, (Math.random()-0.5)*50-50);
            m.scale.set(0.2, 0.2, 0.2); m.rotation.x = Math.PI;
            scene.add(m); hearts.push({mesh: m, speed: 0.015 + Math.random() * 0.02});
        }
        scene.add(new THREE.PointLight(0xffffff, 1, 500)); camera.position.z = 30;
        function animate() {
            requestAnimationFrame(animate);
            hearts.forEach(h => { h.mesh.position.y += h.speed; if(h.mesh.position.y > 50) h.mesh.position.y = -50; });
            renderer.render(scene, camera);
        }
        animate();

        // --- CELEBRATION ---
        function startCelebration() {
            confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 }, shapes: ['heart'], colors: ['#ff0000', '#ff69b4'] });
            document.getElementById('celebrate-btn').classList.add('hidden');
            document.getElementById('final-paragraph').classList.add('hidden');
            document.getElementById('final-text').classList.remove('hidden');
            gsap.from("#final-text", { scale: 0.5, opacity: 0, duration: 1, ease: "back.out" });
        }

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        gsap.to("#step1", { opacity: 1, y: 0, duration: 1 });
    </script>
</body>
</html>